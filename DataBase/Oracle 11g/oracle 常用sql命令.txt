创建表
mysql> create table hello (col1 varchar(10),col2 int);
修改表名
mysql> alter table hello rename to world;
添加新列
mysql> alter table hello add(tel varchar(20) not Null auto_increment primary key);
修改列属性(col3可以与col1相同)
mysql> alter table hello change col1 col3 integer;
删除列
mysql> alter table t1 drop column tel;
设置列默认值
ALTER TABLE members MODIFY COLUMN type_email int DEFAULT '1';

清空表数据,id重新从1开始
mysql> truncate table 表名

显示中文
mysql> set names 'gbk';或 'utf8'
设置数据库和数据表编码
mysql> alter database mail_206 default character set 'utf8';
设置连接编码
mysql> SET character_set_client='utf8';
Query OK, 0 rows affected (0.00 sec)
mysql> SET character_set_connection='utf8';
Query OK, 0 rows affected (0.00 sec)
mysql> SET character_set_results='utf8';
Query OK, 0 rows affected (0.00 sec)

导出数据库结构
-d 没有数据 --add-drop-table 在每个create语句之前增加一个drop table 
$ mysqldump -u root -pFocus_Mail -d --add-drop-table mail_dev>db.sql
导出整个数据库数据
$ mysqldump -u root -pFocus_Mail mail_dev > mail_dev.sql;
导出数据库中某表数据
$ mysqldump -u root -pFocus_Mail mail_dev members > members.sql;

授权ip远程登陆
mysql> GRANT ALL PRIVILEGES ON mail_206.* TO 'root'@'210.14.76.206' IDENTIFIED BY 'Focus_Mail' WITH GRANT OPTION;
mysql> flush privileges;
远程登陆
[root@mail# mysql -h 210.14.76.205 -u root -pFocus_Mail -D mail_dev;

跨表查询
mysql> update tracks as T1 inner join campaigns as T2 on T1.uid=T2.uid set T1.time_span=(T1.created_at-T2.created_at);
跨数据库查询
mysql> insert into mail_206.useradmins (type_user,asset_id,asset_type,created_at,updated_at) select type_user,asset_id,asset_type,created_at,updated_at from mail_dev.useradmins;
mysql> select name from user_orgs as T1 inner join user_org_objects as T2 on T1.id=T2.user_org_id where T2.asset_id=28;

mysql忘记密码
[root@NetDakVPS ~]# service mysqld stop
[root@NetDakVPS ~]# mysqld_safe --skip-grant-tables &
[root@NetDakVPS ~]# mysql -u root
mysql> use mysql
mysql> update user set password=password('123456') where user='root';
mysql> flush privileges;
mysql> quit

修改密码
mysqladmin -u用户名 -p旧密码 password 新密码
mysql> UPDATE mysql.user SET password=PASSWORD(’新密码’) WHERE User=’root’;
mysql> FLUSH PRIVILEGES;



查看database打开状态
SQL> select open_mode from v$database;
OPEN_MODE----------
MOUNTED
SQL> alter database open;
Database altered.
查看当前用户
SQL> show user;
USER is "SYS"

查看service_name
show parameter service_name;
查看用户系统权限
select * from dba_sys_privs;
select * from user_sys_privs;
查看用户对象权限
select * from dba_tab_privs;
select * from all_tab_privs;
select * from user_tab_privs;
查看所有角色
select * from dba_roles;
查看用户所拥有的角色
select * from dba_role_privs;
select * from user_role_privs;
查看当前用户的缺省表空间
select username,default_tablespace from user_users;
查看表
select table_name from user_tables; //当前用户的表       
select table_name from all_tables; //所有用户的表   
select table_name from dba_tables; //包括系统表
select table_name from dba_tables where owner='用户名'
查看表结构
desc table_name;
sqlplus远程连接
sqlplus usr/pwd@//host:port/sid
sqlplus test/test@192.168.0.114:1521/mail
connect test/test@//192.168.0.114:1521/mail

插入列
SQL> alter table student add email varchar(50);
Table altered.
