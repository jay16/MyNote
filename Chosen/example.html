
<link href="chosen.css" type="text/css" rel="stylesheet" />
<body>
  <select class="clsSelectControl pv " id="PRMT_SV_N17052840x13A3DBE4_NS_"
    style="width: 150px;">
        <option>
            p_weekid
        </option>

        <option>
            --------------------------------------------
        </option>

        <option value="104671">
            2012&nbsp;Week&nbsp;47
        </option>

        <option value="104670">
            2012&nbsp;Week&nbsp;46
        </option>

        <option value="104669">
            2012&nbsp;Week&nbsp;45
        </option>

        <option value="104668">
            2012&nbsp;Week&nbsp;44
        </option>

        <option value="104667">
            2012&nbsp;Week&nbsp;43
        </option>

        <option value="104666">
            2012&nbsp;Week&nbsp;42
        </option>

        <option value="104665">
            2012&nbsp;Week&nbsp;41
        </option>

        <option value="104664">
            2012&nbsp;Week&nbsp;40
        </option>

        <option value="104663">
            2012&nbsp;Week&nbsp;39
        </option>

        <option value="104662">
            2012&nbsp;Week&nbsp;38
        </option>
    </select>
</body>



   
<script language="javascript">



var cognos_chozn = function() {
     
  var select_id     = "",//对像select的id
      chozn_id      = "",//构建div下拉框的id
      chozn_anc     = "",//构建好div下拉框的对象
      chozn_a       = "",//div下拉框中的显示框
      chozn_a_span  = "",//下拉框被选择内容显示 
      chozn_drop    = "",//下拉框显示内容外层
      chozn_result  = "",//下拉框显示内容内层
      chozn_li      = "",//下拉内容每条li
      //在父对象下通过class名查找对象
      getChildByClassName =function(anc,cn){
          var child = anc.childNodes;
          for(var i=0;i<child.length;i++){
            if(child[i].className && child[i].className.indexOf(cn) != -1){
               return child[i];
            }
          }
        },

      //在父对象下通过tag名查找对象
      getChildByTagName=function(anc,tn){
        var child = anc.childNodes;
        for(var i=0;i<child.length;i++){
          if(child[i].nodeName.toLowerCase == tn.toLowerCase){
             return child[i];
          }
        }
      },
      //在父对象下通过class名获取对象数组
      getChildrenByClassName=function(anc,cn){
        var ret = new Array;
        var child = anc.childNodes;
        for(var i=0;i<child.length;i++){
          if(child[i].className && child[i].className.indexOf(cn) != -1){
             ret.push(child[i])
          }
        }
        return ret;
      },
      //点击显示框时，显示下拉框
      zhozn_a_onclick=function(chozn_anc,chozn_a,chozn_drop){
        chozn_anc.className = chozn_anc.className + " chzn-container-active";
        chozn_a.className = chozn_a.className + " chzn-single-with-drop";
        chozn_a.style.tabindex = -1;
        chozn_drop.style.left = 0;
      },
      //点击显示框时，显示下拉框事件
      zhozn_onclick_event=function(){//chozn_a
        //not Mozilla
        if(chozn_a.attachEvent) {  
            chozn_a.attachEvent("onclick",function(){zhozn_a_onclick(chozn_anc,chozn_a,chozn_drop)});  

        } else {  
            chozn_a.addEventListener("click",function(){zhozn_a_onclick(chozn_anc,chozn_a,chozn_drop)});  

        } 
      },
     //显示框失去焦点时，隐藏
     chozn_a_blur=function(chozn_anc,chozn_a,chozn_drop){
       chozn_anc.className = chozn_anc.className.replace("chzn-container-active","");
       chozn_a.className = chozn_a.className.replace("chzn-single-with-drop","");
       chozn_a.style.tabindex = 0;
       chozn_drop.style.left = -9999;
     },
     //点击div下拉框中li选项时，同步选中select选项
     anync_select_event=function(sel_index){
       var select = document.getElementById(select_id);
       select.options[sel_index].selected = true;
     },
     //下拉框中li点击效果
     li_onclick=function(e,chozn_li,chozn_a_span,chozn_anc,chozn_a,chozn_drop){
        var li = e.srcElement;  
        if(!li) {  
            li = e.target;  
        }  
        //alert(li.innerHTML);
        //all li remove selected class
       for(var j=0;j<chozn_li.length;j++){
          var l = chozn_li[j];
          if(l.nodeName == "LI" && l.className.indexOf("active-result") != -1){
            l.className = l.className.replace("result-selected","");
          }
       }
       li.className = li.className + " result-selected"
       chozn_a_span.innerHTML = li.innerHTML;
       //同步select选中项
       var sel_index = parseInt(li.id.split("_").pop());
       //alert(sel_index);
       anync_select_event(sel_index);
       chozn_a_blur(chozn_anc,chozn_a,chozn_drop)
     },
     //鼠标在下拉框中移动时，进入Li中添加高亮效果
     li_onmouseover=function(e,chozn_li){
        var li = e.srcElement;  
        if(!li) {  
            li = e.target;  
        }  
       //处理高亮前，把所有li的高亮class移除
       for(var j=0;j<chozn_li.length;j++){
          var l = chozn_li[j];
          if(l.nodeName == "LI" && l.className.indexOf("highlighted") != -1){
            l.className = l.className.replace("highlighted","");
          }
       }
       li.className = li.className + " highlighted"
     },
     //鼠标在下拉框中移动时，移出Li中移除高亮效果
     li_onmouseout=function(e,chozn_li){
        var li = e.srcElement;  
        if(!li) {  
            li = e.target;  
        }  
       //all li remove highlighted class
       for(var j=0;j<chozn_li.length;j++){
          var l = chozn_li[j];
          if(l.nodeName == "LI" && l.className.indexOf("highlighted") != -1){
            l.className = l.className.replace("highlighted","");
          }
       }
       // li.className = li.className.replace("highlighted","");
     },
     //初始化每li点击、鼠标进入、鼠标移出事件
     chozn_ul_event=function(){//chozn_li,chozn_a_span,chozn_anc,chozn_a,chozn_drop
        for(var i=0;i<chozn_li.length;i++){
          var li = chozn_li[i];

          if(li.nodeName == "LI" && li.className.indexOf("active-result") != -1){
            //alert(chozn_li[i].nodeName);
            li.onmouseover = function(){
              li.className = li.className + " highlighted"
            }
            li.onmouseout = function(){
              li.className = li.className.replace("highlighted","");
            }
            
             //not Mozilla
             if(li.attachEvent) {  
                 li.attachEvent("onclick",function(event){li_onclick(event,chozn_li,chozn_a_span,chozn_anc,chozn_a,chozn_drop)});  
                 li.attachEvent("onmouseover",function(event){li_onmouseover(event,chozn_li)}); 
                 li.attachEvent("onmouseout",function(event){li_onmouseout(event,chozn_li)});   
             } else {  
                 li.addEventListener("click",function(event){li_onclick(event,chozn_li,chozn_a_span,chozn_anc,chozn_a,chozn_drop)});  
                 li.addEventListener("mouseover",function(event){li_onmouseover(event,chozn_li)}); 
                 li.addEventListener("mouseout",function(event){li_onmouseout(event,chozn_li)});    
             } 

          }
        }
     },
    //根据select构建div下拉框
    chozn_div_build=function(){
      var ul_li = new Array;
      var select = document.getElementById(select_id)
      var options = select.options;
      for(var i=0;i<options.length;i++){
        ul_li.push('<li class="active-result" id="' + select_id +'_o_'+ String(i) + '">' + options[i].innerHTML +'</li>')
      }
      var chozn_str =''+
       '    <div class="chzn-container chzn-container-single" id="'+chozn_id+'" style="width: 186px;">' +
       '       <a class="chzn-single" href="javascript:void(0)" tabindex="0"><span>2012&nbsp;Week&nbsp;47</span>'+
       '         <div><b></b></div>'+
       '       </a>'+
       '       <div class="chzn-drop" style="left: -9000px; width: 184px; top: 26px;">'+
       '          <div class="chzn-search">'+
       '             <input autocomplete="off" style="width: 149px;" tabindex="-1" type="text">'+
       '          </div>'+
      '           <ul class="chzn-results">'+
                   ul_li.join("")+
      '           </ul>'+
      '        </div>   '+
      '      </div>';
      var new_div = document.createElement("div");
      new_div.innerHTML =chozn_str;
      select.parentNode.insertBefore(new_div,select);
    };
     
     
    //对外接口api
    return{
     
     build: function(s_id){
        select_id = s_id;
        chozn_id  = select_id + "_chozn";
        
        chozn_div_build();//构建div下拉框
        
        //对构建好的div下拉处理
        chozn_anc     = document.getElementById(chozn_id),
        chozn_a       = getChildByClassName(chozn_anc,"chzn-single"),
        chozn_a_span  = getChildByTagName(chozn_a,"span"),
        chozn_drop    = getChildByClassName(chozn_anc,"chzn-drop"),
        chozn_result  = getChildByClassName(chozn_drop,"chzn-results"),
        chozn_li      = getChildrenByClassName(chozn_result,"active-result"),
        
        zhozn_onclick_event(); //赋予点击事件
        chozn_ul_event();      //赋予点击后对ul的事件处理
     }
   }

      
      
}();


cognos_chozn.build("PRMT_SV_N17052840x13A3DBE4_NS_");
</script>
 
   
<script>
   // $(".chzn-select").chosen();
</script>